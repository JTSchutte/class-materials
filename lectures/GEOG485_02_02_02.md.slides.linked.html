<!DOCTYPE html>
<head>
<meta charset="utf-8">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  <link rel="stylesheet" href="slides.css" />
  <link rel="stylesheet" href="slidesSpecific.css" />
</head>
<body>
<section id="module-2.2---web-based-mapping-clients-google-maps-api---part-ii---related-topics" class="titleslide slide level1"><h1>Module 2.2 - Web-based Mapping Clients: Google Maps API - Part II - Related Topics</h1></section><section id="overview" class="slide level3">
<h1>Overview</h1>
<ul>
<li>Additional Google Maps API Capabilities to be Aware of
<ul>
<li>Styling of the base maps with custom preferences</li>
<li>Fusion Tables</li>
</ul></li>
<li>Bringing it all together in a &quot;real&quot; web page</li>
</ul>
</section><section id="getting-started-with-styled-maps---video" class="slide level3">
<h1><em>Getting Started with Styled Maps</em> - Video</h1>
<p><a href="https://developers.google.com/maps/documentation/javascript/styling">Styled Maps Documentation</a> | <a href="http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html">Styled Maps Wizard</a></p>
<figure>
<img src="./images/styledMapsWizard.png" alt="Google Maps Styled Maps Wizard link" /><figcaption>Google Maps Styled Maps Wizard <a href="http://youtu.be/0hhiEjf7_NA">link</a></figcaption>
</figure>
</section><section id="map-example-simple---styled" class="slide level3">
<h1>Map Example: Simple - Styled</h1>
<div class="codeTable">
<table class="sourceCode html numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
</pre></td><td class="sourceCode"><pre><code class="sourceCode html"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span>
<span class="kw">&lt;html&gt;</span>
<span class="kw">&lt;head&gt;</span>
<span class="kw">&lt;style</span><span class="ot"> type=</span><span class="st">&quot;text/css&quot;</span><span class="kw">&gt;</span>
  html <span class="kw">{</span> <span class="kw">height:</span> <span class="dt">100%</span> <span class="kw">}</span>
  body <span class="kw">{</span> <span class="kw">height:</span> <span class="dt">100%</span><span class="kw">;</span> 
    <span class="kw">margin:</span> <span class="dt">0px</span><span class="kw">;</span> 
    <span class="kw">padding:</span> <span class="dt">0px</span><span class="kw">;</span> 
    <span class="kw">background-color:</span> <span class="dt">black</span><span class="kw">;</span> 
    <span class="kw">color:</span> <span class="dt">#CCCCCC</span><span class="kw">;</span>
    <span class="kw">text-align:</span> <span class="dt">center</span><span class="kw">}</span>
  <span class="fl">#map_canvas</span> <span class="kw">{</span> <span class="kw">width:</span><span class="dt">90%</span><span class="kw">;</span> 
    <span class="kw">height:</span><span class="dt">80%</span><span class="kw">;</span> 
    <span class="kw">margin-left:</span> 
    <span class="dt">auto</span><span class="kw">;</span> 
    <span class="kw">margin-right:</span> <span class="dt">auto</span> <span class="kw">}</span>
<span class="kw">&lt;/style&gt;</span>
<span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span>
<span class="ot">    src=</span><span class="st">&quot;http://maps.google.com/maps/api/js?v=3.2</span><span class="er">&amp;</span><span class="st">sensor=false&quot;</span><span class="kw">&gt;</span>
<span class="kw">&lt;/script&gt;</span>
<span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="kw">&gt;</span>
<span class="er">  function initialize() {</span>
<span class="er">    var classroom = new google.maps.LatLng(35.084280,-106.624073)</span>
    <span class="kw">var</span> myOptions = {
      <span class="dt">zoom</span>: <span class="dv">8</span>,
      <span class="dt">center</span>: classroom,
      <span class="dt">mapTypeId</span>: <span class="ot">google</span>.<span class="ot">maps</span>.<span class="ot">MapTypeId</span>.<span class="fu">ROADMAP</span>,
      <span class="dt">styles</span>: [
              {
                <span class="dt">featureType</span>: <span class="st">&quot;water&quot;</span>,
                <span class="dt">stylers</span>: [
                  { <span class="dt">visibility</span>: <span class="st">&quot;on&quot;</span> },
                  { <span class="dt">hue</span>: <span class="st">&quot;#0008ff&quot;</span> }
                ]
              },{
                <span class="dt">featureType</span>: <span class="st">&quot;road.highway&quot;</span>,
                <span class="dt">stylers</span>: [
                  { <span class="dt">hue</span>: <span class="st">&quot;#ff1a00&quot;</span> }
                ]
              },{
                <span class="dt">featureType</span>: <span class="st">&quot;road.arterial&quot;</span>,
                <span class="dt">stylers</span>: [
                  { <span class="dt">hue</span>: <span class="st">&quot;#ffa200&quot;</span> },
                  { <span class="dt">visibility</span>: <span class="st">&quot;simplified&quot;</span> }
                ]
              },{
                <span class="dt">featureType</span>: <span class="st">&quot;road.local&quot;</span>,
                <span class="dt">stylers</span>: [
                  { <span class="dt">visibility</span>: <span class="st">&quot;off&quot;</span> }
                ]
              },{
                <span class="dt">featureType</span>: <span class="st">&quot;administrative&quot;</span>,
                <span class="dt">stylers</span>: [
                  { <span class="dt">visibility</span>: <span class="st">&quot;simplified&quot;</span> }
                ]
              },{
                <span class="dt">featureType</span>: <span class="st">&quot;poi&quot;</span>,
                <span class="dt">stylers</span>: [
                  { <span class="dt">visibility</span>: <span class="st">&quot;on&quot;</span> },
                  { <span class="dt">hue</span>: <span class="st">&quot;#00ffff&quot;</span> }
                ]
              },{
                <span class="dt">featureType</span>: <span class="st">&quot;poi&quot;</span>,
                <span class="dt">stylers</span>: [
                  { <span class="dt">visibility</span>: <span class="st">&quot;on&quot;</span> }
                ]
              }
            ]
    };
<span class="er">    var map = new google.maps.Map(document.getElementById(&quot;map_canvas&quot;),</span>
        myOptions);
  }
<span class="kw">&lt;/script&gt;</span>
<span class="kw">&lt;/head&gt;</span>

<span class="kw">&lt;body</span><span class="ot"> onload=</span><span class="st">&quot;initialize()&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;h1&gt;</span>Sample Map - Styled (POIs Emphasized)<span class="kw">&lt;/h1&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> id=</span><span class="st">&quot;map_canvas&quot;</span><span class="kw">&gt;&lt;/div&gt;</span>
<span class="kw">&lt;/body&gt;</span>

<span class="kw">&lt;/html&gt;</span></code></pre></td></tr></table>
</div>
<p><a href="http://karlbenedict.com/GEOG485-585/lectures/examples/gmaps_styled.html">http://karlbenedict.com/GEOG485-585/lectures/examples/gmaps_styled.html</a></p>
</section><section id="google-io-2011-managing-and-visualizing-your-geospatial-data-with-fusion-tables---video" class="slide level3">
<h1><em>Google I/O 2011: Managing and visualizing your geospatial data with Fusion Tables</em> - Video</h1>
<p>Some particularly relevant sections: <a href="http://youtu.be/Z2o0mtnF1Bg">Introduction (0:00 - 10:30)</a> | <a href="http://youtu.be/Z2o0mtnF1Bg?t=21m40s">Google Maps API Integration (21:40 - 34:42)</a> | <a href="http://youtu.be/Z2o0mtnF1Bg?t=52m">Summary and Links (52:00 52:40)</a></p>
<p><a href="https://support.google.com/fusiontables/?hl=en#topic=1652595">Fusion Tables Documentation/Help</a></p>
<figure>
<img src="./images/fusionTablesVideo.png" alt="Google Fusion Tables Introduction Video link" /><figcaption>Google Fusion Tables Introduction Video <a href="http://youtu.be/Z2o0mtnF1Bg">link</a></figcaption>
</figure>
</section><section id="bringing-it-all-together" class="slide level3">
<h1>Bringing It All Together</h1>
<div class="codeTable">
<table class="sourceCode html numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
</pre></td><td class="sourceCode"><pre><code class="sourceCode html"><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span>

<span class="kw">&lt;html&gt;</span>
    <span class="kw">&lt;head&gt;</span>
        <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;utf-8&quot;</span> <span class="kw">/&gt;</span>
        <span class="kw">&lt;title&gt;</span>Karl&#39;s Event Diary<span class="kw">&lt;/title&gt;</span>
        <span class="kw">&lt;link</span><span class="ot"> rel=</span><span class="st">&quot;stylesheet&quot;</span><span class="ot"> href=</span><span class="st">&quot;./styles/base.css&quot;</span><span class="ot"> media=</span><span class="st">&quot;screen&quot;</span><span class="kw">&gt;</span>
        <span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;http://maps.google.com/maps/api/js?sensor=false&quot;</span><span class="kw">&gt;&lt;/script&gt;</span>
        <span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="ot"> src=</span><span class="st">&quot;./js/base.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span>
        <span class="kw">&lt;script</span><span class="ot"> type=</span><span class="st">&quot;text/javascript&quot;</span><span class="kw">&gt;</span>
            <span class="co">// Define a set of global coordinates for use throughout the web site</span>
            <span class="co">// Place coordinates derived from GNIS database: http://geonames.usgs.gov/pls/gnispublic</span>
            <span class="kw">var</span> eventPlaces = [
                {
                    <span class="dt">name</span>: <span class="st">&quot;Albuquerque&quot;</span>, 
                    <span class="dt">point</span>: <span class="kw">new</span> <span class="ot">google</span>.<span class="ot">maps</span>.<span class="fu">LatLng</span>(<span class="fl">35.0889356</span>,-<span class="fl">106.5747462</span>),
                    <span class="dt">label</span>: <span class="st">&quot;Albuquerque: Duke City Half Marathon&quot;</span>
                }, 
                {
                    <span class="dt">name</span>: <span class="st">&quot;Durango&quot;</span>, 
                    <span class="dt">point</span>: <span class="kw">new</span> <span class="ot">google</span>.<span class="ot">maps</span>.<span class="fu">LatLng</span>(<span class="fl">37.2752800</span>,-<span class="fl">107.8800667</span>),
                    <span class="dt">label</span>: <span class="st">&quot;Durango: Animas Valley/Steamworks Half Marathon&quot;</span>
                },
                {
                    <span class="dt">name</span>: <span class="st">&quot;San Diego&quot;</span>, 
                    <span class="dt">point</span>: <span class="kw">new</span> <span class="ot">google</span>.<span class="ot">maps</span>.<span class="fu">LatLng</span>(<span class="fl">32.7153292</span>,-<span class="fl">117.1572551</span>),
                    <span class="dt">label</span>: <span class="st">&quot;San Diego: San Diego Rock &#39;n&#39; Roll Marathon&quot;</span>
                },
                {
                    <span class="dt">name</span>: <span class="st">&quot;San Francisco&quot;</span>, 
                    <span class="dt">point</span>: <span class="kw">new</span> <span class="ot">google</span>.<span class="ot">maps</span>.<span class="fu">LatLng</span>(<span class="fl">37.7749295</span>,-<span class="fl">122.4194155</span>),
                    <span class="dt">label</span>: <span class="st">&quot;San Francisco: Nike Women&#39;s Marathon&quot;</span>
                },
                {
                    <span class="dt">name</span>: <span class="st">&quot;Orlando&quot;</span>, 
                    <span class="dt">point</span>: <span class="kw">new</span> <span class="ot">google</span>.<span class="ot">maps</span>.<span class="fu">LatLng</span>(<span class="fl">28.5383355</span>,-<span class="fl">81.3792365</span>),
                    <span class="dt">label</span>: <span class="st">&quot;Orlando: Walt Disney World half- and full-marathon&quot;</span>
                },
                {
                    <span class="dt">name</span>: <span class="st">&quot;Anaheim&quot;</span>, 
                    <span class="dt">point</span>: <span class="kw">new</span> <span class="ot">google</span>.<span class="ot">maps</span>.<span class="fu">LatLng</span>(<span class="fl">33.8352932</span>,-<span class="fl">117.9145036</span>),
                    <span class="dt">label</span>: <span class="st">&quot;Anaheim: Disneyland Half Marathon&quot;</span>
                }
            ]
        &lt;<span class="ot">/script&gt;</span>
<span class="ot">    &lt;/head</span>&gt;
    
    &lt;body onload=<span class="st">&quot;initialize()&quot;</span>&gt;
        &lt;h1&gt;
            My diary of endurance events that I<span class="st">&#39;ve participated in since joining Team in Training</span>
        &lt;<span class="ot">/h1&gt;</span>
<span class="ot">        </span>
<span class="ot">        &lt;p&gt;In 2008 Cynthia and I joined the Leukemia and Lymphoma Society&#39;s </span><span class="fl">(</span><span class="ot">&lt;a href=&quot;http://www.lls.org/</span><span class="st">&quot;&gt;LLS&lt;/a&gt;) Team in Training (&lt;a href=&quot;</span>http:<span class="co">//www.teamintraining.org/&quot;&gt;TNT&lt;/a&gt;, &lt;a href=&quot;http://youtu.be/GMSKG8L6K78&quot;&gt;info video&lt;/a&gt;) program as </span>
        participants to train <span class="kw">for</span> the Animas Valley/Steamworks Half Marathon and raise money <span class="kw">for</span> blood cancer
<span class="er">        research and patient services. In spite of our not having any direct connection to blood cancer (at that time), </span>
        we found the goals of LLS admirable,  the combined training and fund-raising program of TNT a great idea, and have made many
        <span class="kw">new</span> friends over the many seasons that we<span class="st">&#39;ve been involved with TNT.&lt;/p&gt;</span>
        
        &lt;p&gt;Since <span class="dv">2008</span> we have continued to volunteer <span class="kw">with</span> TNT, as participants, mentors, and since <span class="dv">2010</span> I have been a coach 
<span class="er">        (check out my &lt;a href=&quot;http://youtu.be/GMSKG8L6K78#t=2m13s&quot;&gt;half-second&lt;/a&gt; of fame in the info video)</span>
        <span class="kw">for</span> TNT <span class="kw">with</span> an emphasis on training walkers <span class="kw">for</span> full- or half-<span class="ot">marathons</span>. <span class="fu">This</span> <span class="fu">page</span> <span class="fu">provides</span> <span class="fu">a</span> <span class="fu">summary</span> <span class="fu">of</span> <span class="fu">the</span> 
        <span class="fu">events</span> <span class="fu">that</span> <span class="fu">I</span><span class="st">&#39;ve participated in in some capacity since we became involved with TNT. &lt;/p&gt;</span>
        
        &lt;div id=<span class="st">&quot;event-map&quot;</span> name=<span class="st">&quot;event-map&quot;</span>&gt;&lt;<span class="ot">/div&gt;</span>


<span class="ot">        &lt;h2&gt;</span>
<span class="ot">            &lt;span class=&quot;date&quot;&gt;9/1/2013&lt;/span</span>&gt; 
            Disneyland Half Marathon 
            &lt;span <span class="kw">class</span>=<span class="st">&quot;time&quot;</span>&gt;<span class="dv">2</span>:<span class="dv">56</span>:<span class="dv">57</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            </span><span class="fl">(</span><span class="ot">&lt;a href=&quot;#event-map&quot; onclick=&quot;recenter</span><span class="fl">(</span><span class="ot">map, eventPlaces</span><span class="bn">[5]</span><span class="ot">.point, 12</span><span class="fl">)</span><span class="ot">&quot;&gt;approx. map&lt;/a</span>&gt;)
        &lt;<span class="ot">/h2&gt;</span>
<span class="ot">        &lt;p class=&quot;eventDescription&quot;&gt;blah, blah, blah ...&lt;/p</span>&gt;

        &lt;h2&gt;
            &lt;span <span class="kw">class</span>=<span class="st">&quot;date&quot;</span>&gt;<span class="dv">1</span>/<span class="dv">13</span>/<span class="dv">2013</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            Disney World  Marathon </span><span class="fl">(</span><span class="ot">Goofy - Day 2</span><span class="fl">)</span>
<span class="ot">            &lt;span class=&quot;time&quot;&gt;6:46:57&lt;/span</span>&gt; 
            (&lt;a href=<span class="st">&quot;#event-map&quot;</span> onclick=<span class="st">&quot;recenter(map, eventPlaces[4].point, 10)&quot;</span>&gt;<span class="ot">approx</span>. <span class="fu">map</span>&lt;<span class="ot">/a&gt;</span><span class="fl">)</span>
<span class="ot">        &lt;/h2</span>&gt;
        &lt;p <span class="kw">class</span>=<span class="st">&quot;eventDescription&quot;</span>&gt;blah, blah, <span class="ot">blah</span> ...&lt;<span class="ot">/p&gt;</span>

<span class="ot">        &lt;h2&gt;</span>
<span class="ot">            &lt;span class=&quot;date&quot;&gt;1/12/2013&lt;/span</span>&gt; 
<span class="er">            Disney World Half Marathon (Goofy - Day 1)</span>
            &lt;span <span class="kw">class</span>=<span class="st">&quot;time&quot;</span>&gt;<span class="dv">3</span>:<span class="dv">22</span>:<span class="dv">48</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            </span><span class="fl">(</span><span class="ot">&lt;a href=&quot;#event-map&quot; onclick=&quot;recenter</span><span class="fl">(</span><span class="ot">map, eventPlaces</span><span class="bn">[4]</span><span class="ot">.point, 10</span><span class="fl">)</span><span class="ot">&quot;&gt;approx. map&lt;/a</span>&gt;)
        &lt;<span class="ot">/h2&gt;</span>
<span class="ot">        &lt;p class=&quot;eventDescription&quot;&gt;blah, blah, blah ...&lt;/p</span>&gt;
    
        &lt;h2&gt;
            &lt;span <span class="kw">class</span>=<span class="st">&quot;date&quot;</span>&gt;<span class="dv">9</span>/<span class="dv">29</span>/<span class="dv">2012</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            Hot Chocolate 15k </span>
<span class="ot">            &lt;span class=&quot;time&quot;&gt;1:56:46&lt;/span</span>&gt; 
            (no map available)
        &lt;<span class="ot">/h2&gt;</span>
<span class="ot">        &lt;p class=&quot;eventDescription&quot;&gt;blah, blah, blah ...&lt;/p</span>&gt;

        &lt;h2&gt;
            &lt;span <span class="kw">class</span>=<span class="st">&quot;date&quot;</span>&gt;<span class="dv">6</span>/<span class="dv">9</span>/<span class="dv">2012</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            Animas Valley/Steamworks</span> Half Marathon 
            &lt;span <span class="kw">class</span>=<span class="st">&quot;time&quot;</span>&gt;no time: coached&lt;<span class="ot">/span&gt; </span>
<span class="ot">            </span><span class="fl">(</span><span class="ot">&lt;a href=&quot;#event-map&quot; onclick=&quot;recenter</span><span class="fl">(</span><span class="ot">map, eventPlaces</span><span class="bn">[1]</span><span class="ot">.point, 10</span><span class="fl">)</span><span class="ot">&quot;&gt;map&lt;/a</span>&gt;)
        &lt;<span class="ot">/h2&gt;</span>
<span class="ot">        &lt;p class=&quot;eventDescription&quot;&gt;blah, blah, blah ...&lt;/p</span>&gt;

        &lt;h2&gt;
            &lt;span <span class="kw">class</span>=<span class="st">&quot;date&quot;</span>&gt;<span class="dv">1</span>/<span class="dv">9</span>/<span class="dv">2012</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            Disney World  Marathon </span><span class="fl">(</span><span class="ot">Goofy - Day 2</span><span class="fl">)</span>
<span class="ot">            &lt;span class=&quot;time&quot;&gt;6:56:28&lt;/span</span>&gt; 
            (&lt;a href=<span class="st">&quot;#event-map&quot;</span> onclick=<span class="st">&quot;recenter(map, eventPlaces[4].point, 10)&quot;</span>&gt;map&lt;<span class="ot">/a&gt;</span><span class="fl">)</span>
<span class="ot">        &lt;/h2</span>&gt;
        &lt;p <span class="kw">class</span>=<span class="st">&quot;eventDescription&quot;</span>&gt;blah, blah, <span class="ot">blah</span> ...&lt;<span class="ot">/p&gt;</span>

<span class="ot">        &lt;h2&gt;</span>
<span class="ot">            &lt;span class=&quot;date&quot;&gt;1/8/2011&lt;/span</span>&gt; 
<span class="er">            Disney World Half Marathon (Goofy - Day 1)</span>
            &lt;span <span class="kw">class</span>=<span class="st">&quot;time&quot;</span>&gt;<span class="dv">3</span>:<span class="dv">29</span>:<span class="dv">00</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            </span><span class="fl">(</span><span class="ot">&lt;a href=&quot;#event-map&quot; onclick=&quot;recenter</span><span class="fl">(</span><span class="ot">map, eventPlaces</span><span class="bn">[4]</span><span class="ot">.point, 10</span><span class="fl">)</span><span class="ot">&quot;&gt;map&lt;/a</span>&gt;)
        &lt;<span class="ot">/h2&gt;</span>
<span class="ot">        &lt;p class=&quot;eventDescription&quot;&gt;blah, blah, blah ...&lt;/p</span>&gt;

        &lt;h2&gt;
            &lt;span <span class="kw">class</span>=<span class="st">&quot;date&quot;</span>&gt;<span class="dv">6</span>/<span class="dv">19</span>/<span class="dv">2010</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            Animas Valley/Steamworks</span> Half Marathon 
            &lt;span <span class="kw">class</span>=<span class="st">&quot;time&quot;</span>&gt;no time: coached&lt;<span class="ot">/span&gt; </span>
<span class="ot">            </span><span class="fl">(</span><span class="ot">&lt;a href=&quot;#event-map&quot; onclick=&quot;recenter</span><span class="fl">(</span><span class="ot">map, eventPlaces</span><span class="bn">[1]</span><span class="ot">.point, 10</span><span class="fl">)</span><span class="ot">&quot;&gt;map&lt;/a</span>&gt;)
        &lt;<span class="ot">/h2&gt;</span>
<span class="ot">        &lt;p class=&quot;eventDescription&quot;&gt;blah, blah, blah ...&lt;/p</span>&gt;

        &lt;h2&gt;
            &lt;span <span class="kw">class</span>=<span class="st">&quot;date&quot;</span>&gt;<span class="dv">6</span>/<span class="dv">6</span>/<span class="dv">2010</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            San Diego Rock &#39;n&#39; Roll Marathon </span>
<span class="ot">            &lt;span class=&quot;time&quot;&gt;no time: coached&lt;/span</span>&gt; 
            (&lt;a href=<span class="st">&quot;#event-map&quot;</span> onclick=<span class="st">&quot;recenter(map, eventPlaces[2].point, 11)&quot;</span>&gt;map&lt;<span class="ot">/a&gt;</span><span class="fl">)</span>
<span class="ot">        &lt;/h2</span>&gt;
        &lt;p <span class="kw">class</span>=<span class="st">&quot;eventDescription&quot;</span>&gt;blah, blah, <span class="ot">blah</span> ...&lt;<span class="ot">/p&gt;</span>

<span class="ot">        &lt;h2&gt;</span>
<span class="ot">            &lt;span class=&quot;date&quot;&gt;10/18/09&lt;/span</span>&gt; 
            Nike Women<span class="st">&#39;s Marathon </span>
            &lt;span <span class="kw">class</span>=<span class="st">&quot;time&quot;</span>&gt;<span class="dv">7</span>:<span class="dv">13</span>:<span class="dv">05</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            </span><span class="fl">(</span><span class="ot">&lt;a href=&quot;#event-map&quot; onclick=&quot;recenter</span><span class="fl">(</span><span class="ot">map, eventPlaces</span><span class="bn">[3]</span><span class="ot">.point, 12</span><span class="fl">)</span><span class="ot">&quot;&gt;map&lt;/a</span>&gt;)
        &lt;<span class="ot">/h2&gt;</span>
<span class="ot">        &lt;p class=&quot;eventDescription&quot;&gt;blah, blah, blah ...&lt;/p</span>&gt;

        &lt;h2&gt;
            &lt;span <span class="kw">class</span>=<span class="st">&quot;date&quot;</span>&gt;<span class="dv">9</span>/<span class="dv">6</span>/<span class="dv">2009</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            Disneyland Half Marathon </span>
<span class="ot">            &lt;span class=&quot;time&quot;&gt;3:43:05&lt;/span</span>&gt; 
            (&lt;a href=<span class="st">&quot;#event-map&quot;</span> onclick=<span class="st">&quot;recenter(map, eventPlaces[5].point, 12)&quot;</span>&gt;map&lt;<span class="ot">/a&gt;</span><span class="fl">)</span>
<span class="ot">        &lt;/h2</span>&gt;
        &lt;p <span class="kw">class</span>=<span class="st">&quot;eventDescription&quot;</span>&gt;blah, blah, <span class="ot">blah</span> ...&lt;<span class="ot">/p&gt;</span>

<span class="ot">        &lt;h2&gt;</span>
<span class="ot">            &lt;span class=&quot;date&quot;&gt;1/11/2009&lt;/span</span>&gt; 
            Disney World Marathon 
            &lt;span <span class="kw">class</span>=<span class="st">&quot;time&quot;</span>&gt;<span class="dv">6</span>:<span class="dv">57</span>:<span class="dv">42</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            </span><span class="fl">(</span><span class="ot">&lt;a href=&quot;#event-map&quot; onclick=&quot;recenter</span><span class="fl">(</span><span class="ot">map, eventPlaces</span><span class="bn">[4]</span><span class="ot">.point, 10</span><span class="fl">)</span><span class="ot">&quot;&gt;map&lt;/a</span>&gt;)
        &lt;<span class="ot">/h2&gt;</span>
<span class="ot">        &lt;p class=&quot;eventDescription&quot;&gt;blah, blah, blah ...&lt;/p</span>&gt;

        &lt;h2&gt;
            &lt;span <span class="kw">class</span>=<span class="st">&quot;date&quot;</span>&gt;<span class="dv">10</span>/<span class="dv">19</span>/<span class="dv">2008</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            Duke City Half Marathon </span>
<span class="ot">            &lt;span class=&quot;time&quot;&gt;3:09:42&lt;/span</span>&gt; 
            (&lt;a href=<span class="st">&quot;#event-map&quot;</span> onclick=<span class="st">&quot;recenter(map, eventPlaces[0].point, 11)&quot;</span>&gt;map&lt;<span class="ot">/a&gt;</span><span class="fl">)</span>
<span class="ot">        &lt;/h2</span>&gt;
        &lt;p <span class="kw">class</span>=<span class="st">&quot;eventDescription&quot;</span>&gt;blah, blah, <span class="ot">blah</span> ...&lt;<span class="ot">/p&gt;</span>

<span class="ot">        &lt;h2&gt;</span>
<span class="ot">            &lt;span class=&quot;date&quot;&gt;6/21/2008&lt;/span</span>&gt; 
            Animas Valley/Steamworks Half Marathon 
            &lt;span <span class="kw">class</span>=<span class="st">&quot;time&quot;</span>&gt;<span class="dv">3</span>:<span class="dv">14</span>:<span class="dv">52</span>&lt;<span class="ot">/span&gt; </span>
<span class="ot">            </span><span class="fl">(</span><span class="ot">&lt;a href=&quot;#event-map&quot; onclick=&quot;recenter</span><span class="fl">(</span><span class="ot">map, eventPlaces</span><span class="bn">[1]</span><span class="ot">.point, 10</span><span class="fl">)</span><span class="ot">&quot;&gt;map&lt;/a</span>&gt;)
        &lt;<span class="ot">/h2&gt;</span>
<span class="ot">        &lt;p class=&quot;eventDescription&quot;&gt;blah, blah, blah ...&lt;/p</span>&gt;

    &lt;<span class="ot">/body&gt;</span>

<span class="ot">&lt;/html</span>&gt;</code></pre></td></tr></table>
</div>
<p><a href="http://karlbenedict.com/GEOG485-585/lectures/examples/tnt/index.html">http://karlbenedict.com/GEOG485-585/lectures/examples/tnt/index.html</a></p>
</section>
<!-- {{{{ dzslides core
#
#
#     __  __  __       .  __   ___  __
#    |  \  / /__` |    | |  \ |__  /__`
#    |__/ /_ .__/ |___ | |__/ |___ .__/ core :€
#
#
# The following block of code is not supposed to be edited.
# But if you want to change the behavior of these slides,
# feel free to hack it!
#
-->

<div id="progress-bar"></div>

<!-- Default Style -->
<style>
  * { margin: 0; padding: 0; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
  details { display: none; }
  body {
    width: 800px; height: 600px;
    margin-left: -400px; margin-top: -300px;
    position: absolute; top: 50%; left: 50%;
    overflow: hidden;
  }
  section {
    position: absolute;
    pointer-events: none;
    width: 100%; height: 100%;
  }
  section[aria-selected] { pointer-events: auto; }
  html { overflow: hidden; }
  body { display: none; }
  body.loaded { display: block; }
  .incremental {visibility: hidden; }
  .incremental[active] {visibility: visible; }
  #progress-bar{
    bottom: 0;
    position: absolute;
    -moz-transition: width 400ms linear 0s;
    -webkit-transition: width 400ms linear 0s;
    -ms-transition: width 400ms linear 0s;
    transition: width 400ms linear 0s;
  }
  figure {
    width: 100%;
    height: 100%;
  }
  figure > * {
    position: absolute;
  }
  figure > img, figure > video {
    width: 100%; height: 100%;
  }
</style>

<script>
  var Dz = {
    remoteWindows: [],
    idx: -1,
    step: 0,
    slides: null,
    progressBar : null,
    params: {
      autoplay: "1"
    }
  };

  Dz.init = function() {
    document.body.className = "loaded";
    this.slides = $$("body > section");
    this.progressBar = $("#progress-bar");
    this.setupParams();
    this.onhashchange();
    this.setupTouchEvents();
    this.onresize();
  }
  
  Dz.setupParams = function() {
    var p = window.location.search.substr(1).split('&');
    p.forEach(function(e, i, a) {
      var keyVal = e.split('=');
      Dz.params[keyVal[0]] = decodeURIComponent(keyVal[1]);
    });
  // Specific params handling
    if (!+this.params.autoplay)
      $$.forEach($$("video"), function(v){ v.controls = true });
  }

  Dz.onkeydown = function(aEvent) {
    // Don't intercept keyboard shortcuts
    if (aEvent.altKey
      || aEvent.ctrlKey
      || aEvent.metaKey
      || aEvent.shiftKey) {
      return;
    }
    if ( aEvent.keyCode == 37 // left arrow
      || aEvent.keyCode == 38 // up arrow
      || aEvent.keyCode == 33 // page up
    ) {
      aEvent.preventDefault();
      this.back();
    }
    if ( aEvent.keyCode == 39 // right arrow
      || aEvent.keyCode == 40 // down arrow
      || aEvent.keyCode == 34 // page down
    ) {
      aEvent.preventDefault();
      this.forward();
    }
    if (aEvent.keyCode == 35) { // end
      aEvent.preventDefault();
      this.goEnd();
    }
    if (aEvent.keyCode == 36) { // home
      aEvent.preventDefault();
      this.goStart();
    }
    if (aEvent.keyCode == 32) { // space
      aEvent.preventDefault();
      this.toggleContent();
    }
    if (aEvent.keyCode == 70) { // f
      aEvent.preventDefault();
      this.goFullscreen();
    }
  }

  /* Touch Events */

  Dz.setupTouchEvents = function() {
    var orgX, newX;
    var tracking = false;

    var db = document.body;
    db.addEventListener("touchstart", start.bind(this), false);
    db.addEventListener("touchmove", move.bind(this), false);

    function start(aEvent) {
      aEvent.preventDefault();
      tracking = true;
      orgX = aEvent.changedTouches[0].pageX;
    }

    function move(aEvent) {
      if (!tracking) return;
      newX = aEvent.changedTouches[0].pageX;
      if (orgX - newX > 100) {
        tracking = false;
        this.forward();
      } else {
        if (orgX - newX < -100) {
          tracking = false;
          this.back();
        }
      }
    }
  }

  /* Adapt the size of the slides to the window */

  Dz.onresize = function() {
    var db = document.body;
    var sx = db.clientWidth / window.innerWidth;
    var sy = db.clientHeight / window.innerHeight;
    var transform = "scale(" + (1/Math.max(sx, sy)) + ")";

    db.style.MozTransform = transform;
    db.style.WebkitTransform = transform;
    db.style.OTransform = transform;
    db.style.msTransform = transform;
    db.style.transform = transform;
  }


  Dz.getDetails = function(aIdx) {
    var s = $("section:nth-of-type(" + aIdx + ")");
    var d = s.$("details");
    return d ? d.innerHTML : "";
  }

  Dz.onmessage = function(aEvent) {
    var argv = aEvent.data.split(" "), argc = argv.length;
    argv.forEach(function(e, i, a) { a[i] = decodeURIComponent(e) });
    var win = aEvent.source;
    if (argv[0] === "REGISTER" && argc === 1) {
      this.remoteWindows.push(win);
      this.postMsg(win, "REGISTERED", document.title, this.slides.length);
      this.postMsg(win, "CURSOR", this.idx + "." + this.step);
      return;
    }
    if (argv[0] === "BACK" && argc === 1)
      this.back();
    if (argv[0] === "FORWARD" && argc === 1)
      this.forward();
    if (argv[0] === "START" && argc === 1)
      this.goStart();
    if (argv[0] === "END" && argc === 1)
      this.goEnd();
    if (argv[0] === "TOGGLE_CONTENT" && argc === 1)
      this.toggleContent();
    if (argv[0] === "SET_CURSOR" && argc === 2)
      window.location.hash = "#" + argv[1];
    if (argv[0] === "GET_CURSOR" && argc === 1)
      this.postMsg(win, "CURSOR", this.idx + "." + this.step);
    if (argv[0] === "GET_NOTES" && argc === 1)
      this.postMsg(win, "NOTES", this.getDetails(this.idx));
  }

  Dz.toggleContent = function() {
    // If a Video is present in this new slide, play it.
    // If a Video is present in the previous slide, stop it.
    var s = $("section[aria-selected]");
    if (s) {
      var video = s.$("video");
      if (video) {
        if (video.ended || video.paused) {
          video.play();
        } else {
          video.pause();
        }
      }
    }
  }

  Dz.setCursor = function(aIdx, aStep) {
    // If the user change the slide number in the URL bar, jump
    // to this slide.
    aStep = (aStep != 0 && typeof aStep !== "undefined") ? "." + aStep : ".0";
    window.location.hash = "#" + aIdx + aStep;
  }

  Dz.onhashchange = function() {
    var cursor = window.location.hash.split("#"),
        newidx = 1,
        newstep = 0;
    if (cursor.length == 2) {
      newidx = ~~cursor[1].split(".")[0];
      newstep = ~~cursor[1].split(".")[1];
      if (newstep > Dz.slides[newidx - 1].$$('.incremental > *').length) {
        newstep = 0;
        newidx++;
      }
    }
    this.setProgress(newidx, newstep);
    if (newidx != this.idx) {
      this.setSlide(newidx);
    }
    if (newstep != this.step) {
      this.setIncremental(newstep);
    }
    for (var i = 0; i < this.remoteWindows.length; i++) {
      this.postMsg(this.remoteWindows[i], "CURSOR", this.idx + "." + this.step);
    }
  }

  Dz.back = function() {
    if (this.idx == 1 && this.step == 0) {
      return;
    }
    if (this.step == 0) {
      this.setCursor(this.idx - 1,
                     this.slides[this.idx - 2].$$('.incremental > *').length);
    } else {
      this.setCursor(this.idx, this.step - 1);
    }
  }

  Dz.forward = function() {
    if (this.idx >= this.slides.length &&
        this.step >= this.slides[this.idx - 1].$$('.incremental > *').length) {
        return;
    }
    if (this.step >= this.slides[this.idx - 1].$$('.incremental > *').length) {
      this.setCursor(this.idx + 1, 0);
    } else {
      this.setCursor(this.idx, this.step + 1);
    }
  }

  Dz.goStart = function() {
    this.setCursor(1, 0);
  }

  Dz.goEnd = function() {
    var lastIdx = this.slides.length;
    var lastStep = this.slides[lastIdx - 1].$$('.incremental > *').length;
    this.setCursor(lastIdx, lastStep);
  }

  Dz.setSlide = function(aIdx) {
    this.idx = aIdx;
    var old = $("section[aria-selected]");
    var next = $("section:nth-of-type("+ this.idx +")");
    if (old) {
      old.removeAttribute("aria-selected");
      var video = old.$("video");
      if (video) {
        video.pause();
      }
    }
    if (next) {
      next.setAttribute("aria-selected", "true");
      var video = next.$("video");
      if (video && !!+this.params.autoplay) {
        video.play();
      }
    } else {
      // That should not happen
      this.idx = -1;
      // console.warn("Slide doesn't exist.");
    }
  }

  Dz.setIncremental = function(aStep) {
    this.step = aStep;
    var old = this.slides[this.idx - 1].$('.incremental > *[aria-selected]');
    if (old) {
      old.removeAttribute('aria-selected');
    }
    var incrementals = $$('.incremental');
    if (this.step <= 0) {
      $$.forEach(incrementals, function(aNode) {
        aNode.removeAttribute('active');
      });
      return;
    }
    var next = this.slides[this.idx - 1].$$('.incremental > *')[this.step - 1];
    if (next) {
      next.setAttribute('aria-selected', true);
      next.parentNode.setAttribute('active', true);
      var found = false;
      $$.forEach(incrementals, function(aNode) {
        if (aNode != next.parentNode)
          if (found)
            aNode.removeAttribute('active');
          else
            aNode.setAttribute('active', true);
        else
          found = true;
      });
    } else {
      setCursor(this.idx, 0);
    }
    return next;
  }

  Dz.goFullscreen = function() {
    var html = $('html'),
        requestFullscreen = html.requestFullscreen || html.requestFullScreen || html.mozRequestFullScreen || html.webkitRequestFullScreen;
    if (requestFullscreen) {
      requestFullscreen.apply(html);
    }
  }
  
  Dz.setProgress = function(aIdx, aStep) {
    var slide = $("section:nth-of-type("+ aIdx +")");
    if (!slide)
      return;
    var steps = slide.$$('.incremental > *').length + 1,
        slideSize = 100 / (this.slides.length - 1),
        stepSize = slideSize / steps;
    this.progressBar.style.width = ((aIdx - 1) * slideSize + aStep * stepSize) + '%';
  }
  
  Dz.postMsg = function(aWin, aMsg) { // [arg0, [arg1...]]
    aMsg = [aMsg];
    for (var i = 2; i < arguments.length; i++)
      aMsg.push(encodeURIComponent(arguments[i]));
    aWin.postMessage(aMsg.join(" "), "*");
  }
  
  function init() {
    Dz.init();
    window.onkeydown = Dz.onkeydown.bind(Dz);
    window.onresize = Dz.onresize.bind(Dz);
    window.onhashchange = Dz.onhashchange.bind(Dz);
    window.onmessage = Dz.onmessage.bind(Dz);
  }

  window.onload = init;
</script>


<script> // Helpers
  if (!Function.prototype.bind) {
    Function.prototype.bind = function (oThis) {

      // closest thing possible to the ECMAScript 5 internal IsCallable
      // function 
      if (typeof this !== "function")
      throw new TypeError(
        "Function.prototype.bind - what is trying to be fBound is not callable"
      );

      var aArgs = Array.prototype.slice.call(arguments, 1),
          fToBind = this,
          fNOP = function () {},
          fBound = function () {
            return fToBind.apply( this instanceof fNOP ? this : oThis || window,
                   aArgs.concat(Array.prototype.slice.call(arguments)));
          };

      fNOP.prototype = this.prototype;
      fBound.prototype = new fNOP();

      return fBound;
    };
  }

  var $ = (HTMLElement.prototype.$ = function(aQuery) {
    return this.querySelector(aQuery);
  }).bind(document);

  var $$ = (HTMLElement.prototype.$$ = function(aQuery) {
    return this.querySelectorAll(aQuery);
  }).bind(document);

  $$.forEach = function(nodeList, fun) {
    Array.prototype.forEach.call(nodeList, fun);
  }

</script>
<!-- vim: set fdm=marker: }}} -->
</body>
</html>
